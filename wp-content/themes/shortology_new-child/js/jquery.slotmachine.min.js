/*! SlotMachine - v2.0.1 - 2014-07-09
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
!function(a,b,c,d){function e(c,e){function f(b){for(var c=0,d=0;b>d;d++)c+=a(A.get(d)).outerHeight();return-c+u}function i(){return Math.abs(Math.round(parseInt(t.css("margin-top").replace(/px/,""),10)/A.first().height()))-1}function j(a){var b,c=a||!1;do b=Math.floor(Math.random()*A.length);while(c&&b===F.index&&b>=0);return{index:b,el:A.get(b)}}function k(){var a;if(null!==y.settings.randomize&&"function"==typeof y.settings.randomize){var b=y.settings.randomize(F.index);(0>b||b>=A.length)&&(b=0),a={index:b,el:A.get(b)}}else a=j();return a}function l(){var a=F.index-1<0?A.length-1:F.index-1;return{index:a,el:A.get(a)}}function m(){var a=F.index+1<A.length?F.index+1:0;return{index:a,el:A.get(a)}}function n(a,b){switch(A.removeClass("slotMachineBlurFast slotMachineBlurMedium slotMachineBlurSlow"),a){case"fast":A.addClass("slotMachineBlurFast");break;case"medium":A.addClass("slotMachineBlurMedium");break;case"slow":A.addClass("slotMachineBlurSlow")}b!==!0||"stop"===a?z.add(A).removeClass("slotMachineGradient"):z.add(A).addClass("slotMachineGradient")}function o(){t.css("margin-top",f(F.index))}function p(a){if(!r())return n("stop"),o(),void setTimeout(function(){q()},y.settings.delay);E=!0;var b=y.settings.delay;if("number"!=typeof a)n("fast",!0),b/=2,t.animate({marginTop:v},b,"linear",function(){C===!1&&(t.css("margin-top",0),p())});else if("number"==typeof a&&a>0){switch(a){case 1:case 2:n("slow",!0);break;case 3:case 4:n("medium",!0),b/=1.5;break;default:n("fast",!0),b/=2}t.animate({marginTop:v},b,"linear",function(){C===!1&&(t.css("margin-top",0),p(a-1))})}else q()}function q(a){if(t.clearQueue().stop(!0,!1),n("slow",!0),E=!0,!r())return"function"==typeof D&&D(!1,!1),n("stop",!1),o(),void(E=!1);var b=j();"function"==typeof a?b=a():null!==y.settings.randomize&&"function"==typeof y.settings.randomize?b=k():y.settings.auto&&(b=m()),F.index=i(),F.el=A.get(F.index);var c=f(b.index),d=3*y.settings.delay;b.index>F.index?0===F.index&&b.index===A.length-1&&t.css("margin-top",f(A.length)):F.index===A.length-1&&0===b.index&&t.css("margin-top",0),F=b,t.animate({marginTop:c},d,"easeOutBounce",function(){n("stop"),E=!1,"function"==typeof D&&(D(z,F),D=null)}),setTimeout(function(){n("false",!1)},d/2)}function r(){if(y.settings.stopHidden===!1)return!1;var c=z.offset().top>a(b).scrollTop()+a(b).height(),d=a(b).scrollTop()>z.height()+z.offset().top;return!c&&!d}function s(){C===!1&&(B=setTimeout(function(){D=s,C=!1,p(5)},y.settings.auto))}this.element=c,this.settings=a.extend({},h,e),this._defaults=h,this._name=g;var t,u,v,w,x,y=this,z=a(c),A=z.children(),B=null,C=!1,D=null,E=!1,F={index:this.settings.active,el:A.get(this.settings.active)};return z.css("overflow","hidden"),A.wrapAll("<div class='slotMachineContainer' />"),t=z.find(".slotMachineContainer"),v=-t.height(),w=A.last().clone(),x=A.first().clone(),t.prepend(w),t.append(x),u=-w.outerHeight(),t.css("margin-top",f(y.settings.active)),y.settings.auto!==!1&&(y.settings.auto===!0?p():s()),{auto:s,shuffle:function(a,b){C=!1,D=b,p("number"==typeof a?a:a!==d?5:d)},stop:function(a){y.settings.auto!==!1&&null!==B&&clearTimeout(B),"number"==typeof a&&a>0?(t.clearQueue().stop(!0,!1),C=!1,p(a)):(C=!0,q())},prev:function(){q(l)},next:function(){q(m)},active:function(){return F},isRunning:function(){return E}}}function f(b,c){var d;return a.data(b,"plugin_"+g)?d=a.data(b,"plugin_"+g):(d=new e(b,c),a.data(b,"plugin_"+g,d)),d}var g="slotMachine",h={active:0,delay:200,auto:!1,randomize:null,stopHidden:!0};a(c).ready(function(){a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>'),a("filter#slotMachineBlurSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>'),a("mask#slotMachineFadeSVG").length<=0&&a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>'),a("body").append("<style>.slotMachineBlurFast{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='5')}.slotMachineBlurMedium{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='3')}.slotMachineBlurSlow{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='1')}.slotMachineGradient{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")}),"function"!=typeof a.easing.easeOutBounce&&a.extend(a.easing,{easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}}),a.fn[g]=function(b){return 1===this.length?f(this,b):this.each(function(){a.data(this,"plugin_"+g)||f(this,b)})}}(jQuery,window,document);